stacks: [media-service]
regions: [eu-west-1]
deployments:
  media-atom-maker:
    type: autoscaling
    parameters:
      bucket: atom-maker-dist
    dependencies:
      - media-atom-maker-ami-update
  media-atom-uploader:
    type: aws-lambda
    parameters:
      bucket: atom-maker-dist
      fileName: media-atom-uploader.zip
      functions:
        CODE:
          name: media-atom-maker-CODE-UploaderLambda-88U8JB1YYG4J
          filename: media-atom-uploader.zip
        PROD:
          name: media-atom-maker-PROD-UploaderLambda-MXQD3DV3H1VL
          filename: media-atom-uploader.zip
  media-atom-transcoder:
    type: aws-lambda
    parameters:
      bucket: atom-maker-dist
      functionNames: [media-atom-maker-transcoder-]
      fileName: media-atom-transcoder.zip
      prefixStack: false
  media-atom-maker-ami-update:
      type: ami-cloudformation-parameter
      app: media-atom-maker
      parameters:
        amiTags:
          Recipe: editorial-tools-basic
          AmigoStage: PROD
