stacks: [media-service]
regions: [eu-west-1]
deployments:
  media-atom-maker:
    type: autoscaling
    parameters:
      bucket: atom-maker-dist
    dependencies:
      - media-atom-maker-ami-update
  media-atom-uploader-s3-events:
    type: aws-lambda
    parameters:
      bucket: atom-maker-dist
      functionNames: [media-atom-maker-uploader-s3-events-]
      fileName: media-atom-uploader.zip
      prefixStack: false
  media-atom-uploader-dynamo-events:
    type: aws-lambda
    parameters:
      bucket: atom-maker-dist
      functionNames: [media-atom-maker-uploader-dynamo-events-]
      fileName: media-atom-uploader.zip
      prefixStack: false
  media-atom-transcoder:
    type: aws-lambda
    parameters:
      bucket: atom-maker-dist
      functionNames: [media-atom-maker-transcoder-]
      fileName: media-atom-transcoder.zip
      prefixStack: false
  media-atom-maker-ami-update:
      type: ami-cloudformation-parameter
      app: media-atom-maker
      parameters:
        amiTags:
          Recipe: editorial-tools-basic
          AmigoStage: PROD
